<!DOCTYPE HTML>
<html lang="cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>1-basic concepts - World of Z2O-K7E</title>


        <!-- Custom HTML head -->
        <meta property="og:title" content="halo2/chap-0/index.md" />
        <meta name="description" content="é›¶çŸ¥ä¸–ç•Œ, Halo2 Tutorial, world of Zero-knowledge proof, Halo2 æ•™ç¨‹">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../.././mdbook-admonish.css">
        <link rel="stylesheet" href="../../theme/css/mdbook-admonish.css">
        <link rel="stylesheet" href="../../theme/css/open-in.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../../index.html">ğŸŒŸ About z2o-k7e  /zu:Ëˆki:/</a></li><li class="chapter-item affix "><a href="../../vision.html">ğŸš© Our Vision & Roadmap</a></li><li class="chapter-item affix "><a href="../../how-to-contribute.html">ğŸ“– How-to-contribute</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><a href="../../beginner.html">ZKP æ–°æ‰‹æ‘å…¥é—¨æ”»ç•¥</a></li><li class="chapter-item affix "><a href="../../zk-everything/zk-everything-Jade/Hello_ZKP.html">Hello ZKP</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item "><a href="../../zkp-intro/toc.html">æ¢ç´¢é›¶çŸ¥è¯†è¯æ˜ç³»åˆ—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../zkp-intro/1/zkp-back.html">ï¼ˆä¸€ï¼‰åˆè¯†ã€Œé›¶çŸ¥è¯†ã€ä¸ã€Œè¯æ˜ã€</a></li><li class="chapter-item "><a href="../../zkp-intro/2/zkp-simu.html">ï¼ˆäºŒï¼‰ç†è§£ã€Œæ¨¡æ‹Ÿã€</a></li><li class="chapter-item "><a href="../../zkp-intro/3/zkp-pok.html">ï¼ˆä¸‰ï¼‰å¯»æ‰¾ã€ŒçŸ¥è¯†ã€</a></li><li class="chapter-item "><a href="../../zkp-intro/4/zkp-rom.html">ï¼ˆå››ï¼‰éšæœºã€ŒæŒ‘æˆ˜ã€</a></li><li class="chapter-item "><a href="../../zkp-intro/5/zkp-crs.html">ï¼ˆäº”ï¼‰åŸ‹è—ã€Œç§˜å¯†ã€</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../zk-snarks/toc.html">ä»é›¶å¼€å§‹å­¦ä¹  zk-SNARK</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../zk-snarks/1-Polynomial-Interaction-and-Proof.html">1-Polynomial-Interaction-and-Proof</a></li><li class="chapter-item "><a href="../../zk-snarks/2-Non-interactivity&Distributed-Setup.html">2-Non-interactivity&Distributed-Setup</a></li><li class="chapter-item "><a href="../../zk-snarks/3-General-Purpose-Computation.html">3-General-Purpose-Computation</a></li><li class="chapter-item "><a href="../../zk-snarks/4-Construction-Properties.html">4-Construction-Properties.md</a></li><li class="chapter-item "><a href="../../zk-snarks/5-Pinocchio-Protocol.html">5-Pinocchio-Protocol</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-intro.html">ç†è§£ Plonk ç³»åˆ—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-arithmetization.html">1-Plonkish Arithmetization</a></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-lagrange-basis.html">2-å¤šé¡¹å¼ç¼–ç </a></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-permutation.html">3-ç½®æ¢è¯æ˜</a></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-constraints.html">4-ç®—æœ¯çº¦æŸä¸æ‹·è´çº¦æŸ</a></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-polycom.html">5-å¤šé¡¹å¼æ‰¿è¯º</a></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-randomizing.html">6-å®ç° Zero Knowledge</a></li><li class="chapter-item "><a href="../../plonk-intro-cn/plonk-lookup.html">7-Lookup Gate</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../lasso-zh/lasso-intro.html">ç†è§£ Lasso ç³»åˆ—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../lasso-zh/lasso-0.html">ç†è§£ Lassoï¼ˆé›¶ï¼‰ï¼šå¸¦ç´¢å¼•çš„æŸ¥è¯¢è¯æ˜</a></li><li class="chapter-item "><a href="../../lasso-zh/lasso-1.html">ç†è§£ Lassoï¼ˆä¸€ï¼‰ï¼šOffline Memory Checking</a></li><li class="chapter-item "><a href="../../lasso-zh/lasso-2.html">ç†è§£ Lasso (äºŒ)ï¼šç¨€ç–å‘é‡ä¸ Tensor ç»“æ„</a></li><li class="chapter-item "><a href="../../lasso-zh/lasso-3.html">ç†è§£ Lasso (ä¸‰)ï¼šå¤§è¡¨æ ¼çš„ç¨€ç–æŸ¥è¯¢è¯æ˜</a></li><li class="chapter-item "><a href="../../lasso-zh/lasso-4.html">ç†è§£ Lasso (å››)ï¼šæ›´å¤šçš„å¯åˆ†è§£è¡¨æ ¼</a></li><li class="chapter-item "><a href="../../lasso-zh/lasso-5.html">ç†è§£ Lasso (äº”)ï¼šè¡¨æ ¼çš„ MLE ç»“æ„</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item expanded "><a href="../../halo2/halo2.html">Halo2 Tutorial</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../halo2/chap-0/index.html" class="active">1-basic concepts</a></li><li class="chapter-item "><a href="../../halo2/chap-1/index.html">2-simple-circuit</a></li><li class="chapter-item "><a href="../../halo2/chap-2/index.html">3-custom-gate</a></li><li class="chapter-item "><a href="../../halo2/chap-3/index.html">4-fibonacci</a></li><li class="chapter-item "><a href="../../halo2/chap-4/index.html">5-range-check</a></li><li class="chapter-item "><a href="../../halo2/cost-model.html">6-cost-model</a></li><li class="chapter-item "><a href="../../halo2/halo2-QA.html">halo2-QA</a></li><li class="chapter-item "><a href="../../halo2/tmp/halo2-learning-materials.html">halo2-learning-materials</a></li><li class="chapter-item "><a href="../../halo2/tmp/halo2-learning-materials.html">learning-halo2 (0xPARC)</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../halo2/tmp/1-Simple-Example.html">1-Simple Examples</a></li><li class="chapter-item "><a href="../../halo2/tmp/2-Fibonacci-example-1.html">2-Fibonacci-example-1</a></li><li class="chapter-item "><a href="../../halo2/tmp/3-Fibonacci-example-2.html">3-Fibonacci-example-2</a></li><li class="chapter-item "><a href="../../halo2/tmp/4-IsZero-Check-example-3.html">4-IsZero Check-example-3</a></li><li class="chapter-item "><a href="../../halo2/tmp/5-Range-check.html">5-Range check-example-1.md</a></li><li class="chapter-item "><a href="../../halo2/tmp/6-Range-Check(code-explanation).html">6-Range Check (code explanation)</a></li><li class="chapter-item "><a href="../../halo2/tmp/7-Range-Check-lookup(example-2).html">7-Range Check-Lookup-example-2)</a></li><li class="chapter-item "><a href="../../halo2/tmp/8-Range-Check(example-3).html">8-Range Check-Lookup-example-3)</a></li><li class="chapter-item "><a href="../../halo2/tmp/9-decomposed.html">9-Range Check-Decompose)</a></li><li class="chapter-item "><a href="../../halo2/tmp/ZKP-APP.html">ZKP Apps with halo2</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../halo2/tmp/Zordle.html">Zordle</a></li><li class="chapter-item "><a href="../../halo2/tmp/Hammster.html">Hammster</a></li></ol></li></ol></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-Xor0v0/Lattice-1-Basic.html">Lattice-based Crypography</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../zk-everything/zk-everything-Xor0v0/Lattice-1-Basic.html">Lattice-1-Basic</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-Xor0v0/Lattice-2-LLL.html">Lattice-2-LLL</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-Xor0v0/Lattice-3-CVP.html">Lattice-3-CVP</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-Xor0v0/Lattice-4-RSA.html">Lattice-4-RSA</a></li></ol></li><li class="chapter-item "><a href="../../zkp-QA.html">Recurrent Q&A</a></li><li class="chapter-item "><a href="../../zk-everything/toc.html">zk-everything</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../zk-everything/BabySNARK tutorial.html">BabySNARK tutorial</a></li><li class="chapter-item "><a href="../../zk-everything/zk-learning-miles/KZG.html">KZG</a></li><li class="chapter-item "><a href="../../zk-everything/zk-learning-miles/Lecture1:Overview about Zeroknowledge.html">Lecture1:Overview about Zeroknowledge</a></li><li class="chapter-item "><a href="../../zk-everything/zk-learning-miles/Lecture2:Introduction to Modern SNARKs.html">Lecture2:Introduction to Modern SNARKs</a></li><li class="chapter-item "><a href="../../zk-everything/zk-learning-miles/Lecture12:ZKEVM.html">Lecture12:ZKEVM</a></li><li class="chapter-item "><a href="../../zk-everything/zk-learning-miles/Lecture16:Hardware acceleration.html">Lecture16:Hardware acceleration</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-joe/GKR_with_ZK_Argument.html">Spartan preliminary: GKR with ZK Argument</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-joe/Hyrax.html">Spartan preliminary: Hyrax</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-joe/Spartan.html">Spartan In Depth</a></li><li class="chapter-item "><a href="../../zk-everything/zk-everything-joe/Theory_and_Practical_Implementation_of_BLS12-381.html">BLS12-381 ç†è®ºä¸å®ç°</a></li><li class="chapter-item "><a href="../../Nova/SuperNova.html">SuperNova</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../public goods/toc.html">ZKP Public Goods</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../public goods/ç¬¬äºŒç« .html">ch2</a></li><li class="chapter-item "><a href="../../public goods/4-Proving-System.html">ch4-Proving System</a></li><li class="chapter-item "><a href="../../public goods/5-plonk-intro.html">ch5-plonk-intro</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../materials/ZK-Materials.html">ZK Materials</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item "><a href="../../exp/toc.html">ç»éªŒå¿ƒå¾—</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../exp/guoyu.html">éƒ­å®‡ï¼šZK æŠ€æœ¯çš„å­¦ä¹ å¿ƒå¾—å’Œç»éªŒåˆ†äº«</a></li><li class="chapter-item "><a href="../../exp/freeyao.html">å¯¹è¯å§šç¿”ï¼šè§£è¯»é›¶çŸ¥è¯†è¯æ˜çš„å‰ä¸–ä»Šç”Ÿ</a></li><li class="chapter-item "><a href="../../https://zhuanlan.zhihu.com/p/268305208.html">é‚“ç‡šï¼šé›¶çŸ¥è¯†ï¼Œæ¨¡æ‹Ÿä¸å½’çº¦ï¼ˆä¸€ä¸ªä¸ªäººåŒ–çš„è§†è§’ï¼‰</a></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item "><a href="../../zkp-space/toc.html">ZKP Space</a><a class="toggle"><div>â±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../../zkp-space/2023-10-22-zkp-coprocessor.html">2023.10.12: èŠèŠ ZKP Coprocessor</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">World of Z2O-K7E</h1>

                    <div class="right-buttons">
                        <button id="lang-toggle" class="icon-button" type="button" title="Change Language" aria-label="Change Language" aria-haspopup="true" aria-expanded="false" aria-controls="lang-list">
                            <i class="fa fa-globe"></i>
                        </button>
                        <ul id="lang-list" class="theme-popup" style="left: auto;" aria-label="Languages" role="menu">
                            <li role="none"><button role="menuitem" class="theme"><a id="lang-cn">ä¸­æ–‡</a></button></li>
                            <li role="none"><button role="menuitem" class="theme"><a id="lang-en">English</a></button></li>
                        </ul>
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/zkp-co-learning/zkp-co-learning.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/zkp-co-learning/zkp-co-learning.github.io/edit/main/src/halo2/chap-0/readme.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<blockquote>
<ul>
<li>ä½œè€…:  <a href="https://github.com/dajuguan">@Po@Ethstorage.io</a> / <a href="https://github.com/demian101">@Demian</a> / <a href="https://github.com/readygo67">@Keep</a></li>
<li>æ—¶é—´: 2023-10-18</li>
<li>æ ¡å¯¹:  <a href="https://github.com/dajuguan">@Po@Ethstorage.io</a> / <a href="https://github.com/demian101">@Demian</a></li>
</ul>
</blockquote>
<ul>
<li><a href="#halo2%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">Halo2æ ¸å¿ƒæ¦‚å¿µ</a>
<ul>
<li><a href="#halo2-%E7%94%B5%E8%B7%AF%E7%BB%93%E6%9E%84">Halo2 ç”µè·¯ç»“æ„</a>
<ul>
<li><a href="#columns">Columns</a></li>
<li><a href="#rows">Rows</a></li>
<li><a href="#gate">Gate</a></li>
<li><a href="#copy-constraint">Copy constraint</a></li>
<li><a href="#region">Region</a></li>
<li><a href="#layouter">Layouter</a>
<ul>
<li><a href="#simplefloorplanner">SimpleFloorPlanner</a></li>
</ul>
</li>
<li><a href="#diagrams">Diagrams</a></li>
</ul>
</li>
<li><a href="#halo2-%E7%BC%96%E7%A8%8B%E6%A8%A1%E5%9E%8B">Halo2 ç¼–ç¨‹æ¨¡å‹</a></li>
</ul>
</li>
</ul>
<h1 id="halo2æ ¸å¿ƒæ¦‚å¿µ"><a class="header" href="#halo2æ ¸å¿ƒæ¦‚å¿µ">Halo2æ ¸å¿ƒæ¦‚å¿µ</a></h1>
<p>åœ¨å‰é¢çš„ prerequisite è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† PLONK åè®®åŠå…¶ lookup table ä¼˜åŒ–ï¼Œåœ¨æœ¬èŠ‚æˆ‘ä»¬å°†ä¼šä»¥ <a href="https://github.com/zcash/halo2">halo2</a> è¿™ä¸ª Rust library ä¸ºåŸºç¡€ï¼Œè¯¦ç»†è®²è§£ Halo2 çš„ç›¸å…³åŸºæœ¬æ¦‚å¿µã€‚</p>
<h2 id="halo2-ç”µè·¯ç»“æ„"><a class="header" href="#halo2-ç”µè·¯ç»“æ„">Halo2 ç”µè·¯ç»“æ„</a></h2>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ <a href="https://learn.z2o-k7e.world/plonk-intro-cn/plonk-intro.html">Vanilla PLONK åè®®</a> ä¸­ï¼Œé—¨çº¦æŸç³»ç»Ÿç›¸å¯¹å›ºå®šå’Œå±€é™ï¼Œè¡¨ç°åŠ›å¹¶ä¸å¼ºï¼š</p>
<p><span class="katex-display"><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">O</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></p>
<p>ä¸ºäº†æ”¯æŒæ›´å¤æ‚å’Œæ›´é«˜é˜¶çš„è¿ç®—ï¼Œhalo2 ä¸­å¼•å…¥äº† <code>custom gate</code> å’Œ <code>lookup table</code>ï¼Œè¿™ä½¿å¾—çº¦æŸç³»ç»Ÿä¸­çš„çº¦æŸå¹¶ä¸é™å®šåœ¨æŸä¸€è¡Œä¸Šçš„å˜é‡ï¼Œ<code>custom gate</code> å¯ä»¥ä»»æ„æŒ‡å®šçº¦æŸéœ€è¦çš„è®¡ç®—ã€‚ <sup class="footnote-reference"><a href="#1">1</a></sup></p>
<p>å¦‚ä¸‹å›¾ï¼Œå¯ä»¥æ¸…æ™°åœ°çœ‹åˆ° PLONK æ¯ä¸ªç‰ˆæœ¬çš„æ¼”è¿›ï¼Œä»è€Œè®© halo 2 èƒ½å¯¹ custom constraints å’Œ lookup table è¿›è¡Œæ”¯æŒï¼š</p>
<img src="imgs/APIs_image_16.png" style="zoom:50%;" />
<p>åœ¨ä¸€èˆ¬çš„ç”µè·¯ä»£ç ç»“æ„ä¸­ï¼Œéƒ½ä¼šæœ‰è¾“å…¥ã€è¾“å‡ºã€çº¦æŸç­‰å¿…è¦æ„ä»¶ï¼Œåœ¨ halo2 ä¸­ä¹Ÿä¸ä¾‹å¤–ã€‚åªä¸è¿‡ï¼Œä¸åƒ R1CS é‚£èˆ¬æ¯ä¸ªçº¦æŸéƒ½ä¸¥ä¸åˆç¼åœ°å†™æˆ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">===</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span> çš„æ ¼å¼ï¼Œhalo2 ä¸­ï¼Œç”µè·¯çš„ arithmetizationï¼ˆç”µè·¯ä¸­çš„ expressionï¼‰ å¯ä»¥å½¢è±¡åœ°çœ‹ä½œæ˜¯æˆä¸€å¼ çŸ©å½¢è¡¨ (table)ï¼Œæ‰€æœ‰çš„çº¦æŸåˆ™å¯ä»¥é€šè¿‡åœ¨è¿™å¼ è¡¨ä¸­è§„åˆ’åŒºåŸŸ(region)ï¼Œæ”¾ç½®å•å…ƒæ ¼(cells) æ¥æ„é€ ã€‚</p>
<blockquote>
<p><a href="https://zcash.github.io/halo2/concepts/proofs.html">The halo2 Book</a>: The language that we use to express circuits for a particular proof system is called anÂ <em><strong>arithmetization</strong></em>. Usually, an arithmetization will define circuits in terms of polynomial constraints on variables over a field. <sup class="footnote-reference"><a href="#9">2</a></sup></p>
</blockquote>
<p>å¦‚ä¸‹å›¾å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>ç”µè·¯è¡¨æ•´ä½“ç”±å•å…ƒï¼ˆ<code>cell</code>ï¼‰ã€åˆ—ï¼ˆ<code>Column</code>ï¼‰å’Œè¡Œï¼ˆ<code>Row</code>ï¼‰ç»„æˆï¼Œ</li>
<li>ç›¸é‚»çš„<code>cell</code>ã€<code>row</code> å’Œ <code>colum</code> çš„ä»»æ„ç»„åˆå¯ä»¥æ„æˆ <code>region</code></li>
<li>åˆ—åˆå¯ä»¥åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š<code>advice</code>ï¼Œ<code>instance</code> å’Œ <code>selector</code>ï¼Œ
<ul>
<li>å…¶ä¸­ <code>advice/instance</code> columns åœ¨åŒä¸€ä¸ªç”µè·¯ä¸­å¡«å…¥çš„å€¼å¯ä»¥ä¸ä¸€æ ·</li>
<li><code>fixed</code> å’Œ <code>selector</code> columns åœ¨ç”µè·¯ preprocessed é˜¶æ®µç”Ÿæˆï¼ŒåŒä¸€ä¸ªç”µè·¯å¡«å…¥çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥è§†ä¸ºæ˜¯ç”µè·¯ç»“æ„å›ºå®šçš„ä¸€éƒ¨åˆ†</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šåˆ†åˆ«è¯¦ç»†è®²è§£å„éƒ¨åˆ†ç»„ä»¶çš„ç”¨é€”åŠä½¿ç”¨æ–¹æ³• <sup class="footnote-reference"><a href="#2">3</a></sup></p>
<img src="imgs/APIs_image_1.png" style="zoom:27%;" />
<h3 id="columns"><a class="header" href="#columns">Columns</a></h3>
<p>æˆ‘ä»¬å¯ä»¥å°†ç”µè·¯çš„<strong>è¾“å…¥</strong>å’Œ<strong>è¾“å‡º</strong>æ¦‚å¿µåŒ–ä¸ºç»™å®šæœ‰é™åŸŸ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">F</span></span></span></span> ä¸Š <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> åˆ— <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> è¡Œçš„çŸ©é˜µ</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è®²è§£å„ä¸ª columns çš„å«ä¹‰å’Œç”¨é€”ï¼š</p>
<p><strong><code>instance columns</code></strong> ï¼šåŒ…å«äº† Prover/Verifier ä¹‹é—´å…±äº«çš„è¾“å…¥ï¼Œé€šå¸¸ç”¨äºå…¬å…±è¾“å…¥ (public inputs)</p>
<ul>
<li>ä¾‹å¦‚ SHA256 çš„ç»“æœ</li>
<li>Merkle Tree çš„æ ¹</li>
</ul>
<p><strong><code>advice columns</code></strong>ï¼šåŒ…å«äº† <code>private input</code> &amp; ç”µè·¯è¿è¡Œä¸­æ‰€éœ€çš„ä¸­é—´å˜é‡ï¼Œå³witness,è¿™éƒ¨åˆ†åªæœ‰<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span></span></span></span>çŸ¥é“</p>
<p><strong><code>fixed columns</code></strong> ï¼šåŒ…å«åœ¨ key generation é˜¶æ®µè®¾ç½®çš„ preprocessed valuesï¼Œå¯ä»¥è§†ä¸ºæ˜¯ç”µè·¯ç»“æ„å›ºå®šçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯å¯ä»¥è¢« pre-compute çš„</p>
<ul>
<li>å¦‚ç”µè·¯ä¸­ hardcoded constant</li>
<li>æŸ¥æ‰¾è¡¨ Lookup table column</li>
</ul>
<p><strong><code>selector columns</code></strong> ï¼šå³é€‰æ‹©å™¨ï¼ŒåŒæ ·æ˜¯åœ¨ key generation é˜¶æ®µè®¾ç½®çš„ preprocessed values</p>
<blockquote>
<p>æœ‰äº›æ•™ç¨‹ä¸­ä¹Ÿä¼šç›´æ¥å°†  selector columns æ”¾å…¥ fixed columns ä¸­ï¼Œè¿™å®Œå…¨æ­£ç¡®ï¼å› ä¸º Selector å°±æ˜¯ç‰¹æ®Šçš„ fixed columns</p>
<p>Tips: åŒä¸€è¡Œå¯ä»¥æ”¯æŒè‹¥å¹²ç§ä¸åŒçš„çº¦æŸ, æ¯”å¦‚ä¸‰å…ƒä¸‰æ¬¡, æˆ–è€…ä¸‰å…ƒäºŒæ¬¡, å¯ä»¥é€šè¿‡ selector æ¥é€‰æ‹©å…·ä½“éœ€è¦æ»¡è¶³å“ªä¸ªçº¦æŸã€‚æ¯”å¦‚æœ‰  3 ä¸ª custom gate, å¯ä»¥åªæ»¡è¶³å…¶ä¸­ä¸€ä¸ªå°± OK , æˆ–è€…æ»¡è¶³å…¶ä¸­çš„ 2 ä¸ªï¼Œéå¸¸çµæ´»</p>
</blockquote>
<!--
we conceptualise the circuit as a matrix of m columns and n rows,  over a given finite field <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">F</span></span></span></span> 

 - `instance columns` contain inputs shared between prover/verifier , generally used for public inputs
	 - e.g.  the res of SHA256
	 - a root of a Merkle Tree. 
 - `advice columns` contain private values witnessed by the prover
 - `fixed columns` contain preprocessed values set at key generation

fixed columns contain  preprocessed values set at key generation
-->
<h3 id="rows"><a class="header" href="#rows">Rows</a></h3>
<p>çŸ©é˜µä¸­çš„è¡Œæ•°é€šå¸¸æ˜¯ 2 çš„å¹‚ï¼Œå—æœ‰é™åŸŸ F çš„å¤§å°é™åˆ¶ï¼›
è¡Œæ•°å¯¹åº”äº Plonkish ç®—æœ¯åŒ–(arithmetization) ä¸­çš„ n-th å•ä½æ ¹(nth root of unity)ã€‚
çº¦æŸé€‚ç”¨äºæ‰€æœ‰è¡Œ(apply to all the rows)ï¼Œä½†å¯ä»¥é€šè¿‡é€‰æ‹©å™¨åˆ—ä¸­å®šä¹‰çš„  Selector å¯ç”¨/ç¦ç”¨ã€‚ <sup class="footnote-reference"><a href="#8">4</a></sup></p>
<h3 id="gate"><a class="header" href="#gate">Gate</a></h3>
<p>é—¨(Gate) é€šå¸¸æ˜¯ç”±ä¸€ç»„çº¦æŸæ„æˆï¼Œè¿™ç»„çº¦æŸé€šå¸¸å— selector æ§åˆ¶ã€‚ Halo2 æä¾›ä¸¤ç§ç±»å‹çš„é—¨ï¼š</p>
<ul>
<li>æ ‡å‡†é—¨(Standard gate)ï¼šæ ‡å‡†é—¨æ”¯æŒé€šç”¨ç®—æœ¯ï¼Œä¾‹å¦‚åŸŸä¹˜æ³•å’Œé™¤æ³•</li>
<li>è‡ªå®šä¹‰é—¨(Custom gate)ï¼šè‡ªå®šä¹‰é—¨æ›´å…·è¡¨ç°åŠ›ï¼Œèƒ½å¤Ÿæ”¯æŒç”µè·¯ä¸­çš„ä¸“é—¨æ“ä½œï¼› ä¸‹é¢çš„æ–æ³¢é‚£å¥‘ç”µè·¯æ˜¾ç¤ºäº†è‡ªå®šä¹‰é—¨çš„ç¤ºä¾‹ï¼ˆè¯·æ³¨æ„ï¼Œå¯ç”¨é€‰æ‹©å™¨æ—¶ï¼Œé—¨å°†åº”ç”¨äºæ¯ä¸€è¡Œï¼‰</li>
</ul>
<h3 id="copy-constraint"><a class="header" href="#copy-constraint">Copy constraint</a></h3>
<p>Plonk çš„ã€Œæ‹·è´çº¦æŸã€æ˜¯é€šè¿‡ã€Œç½®æ¢è¯æ˜ã€ï¼ˆPermutation Argumentï¼‰æ¥å®ç°ï¼Œå³æŠŠè¡¨æ ¼ä¸­éœ€è¦çº¦æŸç›¸ç­‰çš„é‚£äº›å€¼è¿›è¡Œå¾ªç¯æ¢ä½ï¼Œç„¶åè¯æ˜æ¢ä½åçš„è¡¨æ ¼å’ŒåŸæ¥çš„è¡¨æ ¼å®Œå…¨ç›¸ç­‰ã€‚</p>
<p>Permutation Argument æä¾›äº†ä¸€ç§ cheap çš„æ–¹å¼æ¥è¯æ˜é›†åˆä¸­éƒ¨åˆ†å€¼çš„ç›¸ç­‰æ€§ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œåœ¨ Fibonacci ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡ <code>copy_advice</code> API å¼ºåˆ¶çº¦æŸçº¢è‰²æ¡†ã€è“è‰²æ¡†çš„ 2 å¯¹å€¼åˆ†åˆ«ç›¸ç­‰</p>
<img src="./imgs/halo2_image_4.png" style="zoom:30%;" />
<h3 id="region"><a class="header" href="#region">Region</a></h3>
<p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡çœ‹è§†é¢‘æˆ–è€…è¯»ç›¸å…³æ–‡æ¡£ï¼Œä½ å¯èƒ½ä¼šå‘ç° Region æ˜¯ä¸€ä¸ªç•¥æ˜¾æŠ½è±¡çš„æ¦‚å¿µï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå‘ä¸‹è¯»ï¼</p>
<p>åœ¨ halo2 ä¸­æˆ‘ä»¬ä¸ä¼šç›´æ¥çº¦æŸä¸€æ•´ä¸ªç”µè·¯çš„è¡Œå’Œåˆ—ï¼Œè€Œæ˜¯å°†æ•´ä¸ªç”µè·¯åˆ’åˆ†ä¸ºç”±ç›¸é‚»çš„è¡Œå’Œåˆ—ç»„æˆçš„ regionï¼Œåœ¨ region ä¸­å¯ä»¥é‡‡ç”¨ç›¸å¯¹åç§»(relative offsets)çš„æ–¹å¼<strong>è®¿é—® Cell</strong>ã€‚ åœ¨ä¸€ä¸ª region ä¸­ï¼Œæˆ‘ä»¬åªå…³å¿ƒ cells ä¹‹é—´çš„<strong>ç›¸å¯¹å…³ç³»</strong></p>
<p>å¦‚æœä¸¤ä¸ªçº¦æŸæ²¡æœ‰å…³ç³»ï¼Œæˆ–è€…æ‚¨ä¹Ÿä¸å…³å¿ƒä¸¤ä¸ª â€œcellâ€ ä¹‹é—´å¦‚ä½•ç›¸äº’ä½œç”¨çš„è¯ï¼Œé‚£ä¹ˆå°±åº”è¯¥å°†å®ƒä»¬åˆ†åˆ«å®šä¹‰åœ¨ 2 ä¸ªä¸åŒçš„ regions ä¸­ï¼Œå¦‚æ­¤å°±å¯ä»¥å°†æ§åˆ¶æƒäº¤ç»™halo2é»˜è®¤çš„layouterï¼Œè®© layouter å»ä¼˜åŒ–æ•´ä½“ç”µè·¯ region åˆ†å¸ƒï¼Œæ¯”å¦‚åˆå¹¶ä¸åŒçš„regionåˆ°ä¸€è¡Œæ¥å‡å°ç”µè·¯çš„è§„æ¨¡ï¼ˆlayouter åé¢ä¼šè®²è§£ï¼‰ã€‚</p>
<p>å› æ­¤ï¼Œå¹¶ä¸æ¨èå°†æ•´ä¸ªç”µè·¯çš„é€»è¾‘éƒ½å¡è¿›åŒä¸€ä¸ªåºå¤§çš„ regionï¼Œæ‚¨åº”è¯¥å°è¯•å°†å…¶å°½å¯èƒ½åˆ†è§£ä¸ºé€»è¾‘æ¸…æ™°ã€ç»“æ„ç®€å•çš„ regionsã€‚  <sup class="footnote-reference"><a href="#4">5</a></sup></p>
<!--
 - heuristically you can think of a region as like a self-contained block of flick and within this block you are concerned with relative offsets and you need certain cells to be placed relative to other cells in a specific way. whereas(ç›¸å) if you do not care about how two blocks interact with each other then you should define them in separate regions and the reason why this is better is you can hand some control to the `layouter` to optimize the layout of your regions
 - so as opposed to like using a one region for your whole circuit,  you should try and break it up as far as possible into self-contained regions,  unless your whole circuit is literally the same gate repeating over and over.  in that case,  you just need one region.
	 - 
	 -->
<!--
ç”µè·¯æ„å»ºå¾€å¾€æ˜¯ç›¸å¯¹äºä¸€ä¸ª Regionã€‚åŒä¸€ä¸ªç”µè·¯æ¨¡å—ï¼Œå¯ä»¥åœ¨ä¸åŒçš„ Regionä¸­â€œå¤åˆ¶â€ã€‚

"regions" æ˜¯ `gates` å’Œå…¨å±€ç”µè·¯ `layouter` ä¹‹é—´çš„ç•Œé™ï¼š

- ä¸€ä¸ªä¿ç•™ç›¸å¯¹åç§»çš„åˆ†é…å—ï¼šå®¹æ˜“ç†è§£ gates åœ¨åŒºåŸŸå†…å¦‚ä½•åº”ç”¨
- ä¸å—å…¶ä»–åŒºåŸŸä¸­çš„åç§»å½±å“ï¼šå¯ä»¥è‡ªç”±åœ°é‡æ–°æ’åˆ—ä»¥ä¼˜åŒ–å…¨å±€ç©ºé—´ä½¿ç”¨
- æ¯ä¸ªåŒºåŸŸéƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå¦‚æœä½ è¯•å›¾ç¼–å†™è·¨è¶Šä¸¤ä¸ªåŒºåŸŸä¹‹é—´çš„ç•Œé™çš„æŸäº›çº¦æŸï¼Œä½ ä¼šå¾ˆå¿«å‘ç°ä½ é‡åˆ°äº†é—®é¢˜ã€‚[^3]

"regions" are the boundary between `gates` and the global circuit `layouter` : 
 - a block of assignments preserving relative offsets: easy to reason about how gates apply within the region
 - not affected by offsets in other regions: can be freely rearranged to optimise global space usage
 - each region is completely independent of other regions, and if you were to try to write some constraint that crossed the boundary between two regions you would quickly find that you run into problems. [^3] 
-->
<h3 id="layouter"><a class="header" href="#layouter">Layouter</a></h3>
<p>çœ‹å®Œäº† region çš„å®šä¹‰å’Œè®²è§£åï¼Œæ˜¯ä¸æ˜¯è¿˜æ˜¯æœ‰ç‚¹ä¸å¾—è¦é¢†ï¼Ÿä¸‹é¢æˆ‘ä»¬ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ Layouter å»å¸ƒå±€ regionï¼Œçœ‹å®Œåä¹Ÿè®¸ä½ ä¼šå¯¹ region æœ‰æ›´è¿›ä¸€æ­¥çš„è®¤è¯†ã€‚</p>
<p>layouter ä½œç”¨åœ¨ assignment ï¼ˆç”µè·¯èµ‹å€¼ï¼‰æœŸé—´ï¼Œå³å½“ä½ ç”¨ Witness å»å¡«å……æ•´ä¸ª Circuit table æ—¶ä½¿ç”¨ã€‚å®é™…ä¸­ï¼Œlayouterä¸€èˆ¬ä¸ä¼šä¸€ä¸‹å­å¡«æ»¡æ•´ä¸ª tableï¼Œ è€Œæ˜¯æ¯æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ª regionï¼Œå¹¶åœ¨å…¶åŒ…å«çš„å•å…ƒæ ¼ä¸­å¡«å…¥ç›¸åº”çš„witnesså€¼ã€‚</p>
<!-- 
The layouter will be used during the assignment, namely when you fill up a table with the witness. Each time you will fill up a region. You won't fill the entire table at once.  layouter takes a region as input and assign values to that region.
-->
<p>ä¸ºäº†ä¿è¯æ¯ä¸ª gate èƒ½å½“è®¿é—®åˆ°å…¶æ‰€éœ€çš„æ‰€æœ‰å•å…ƒæ ¼ï¼Œä¸€èˆ¬è€Œè¨€å¯¹ gate æ‰€åœ¨çš„ region è¿›è¡Œç”µè·¯å¸ƒå±€æ—¶ï¼Œregion éœ€éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š <strong>region ä¸éœ€è¦ä¸ custom gate å…·æœ‰ç›¸åŒçš„å½¢çŠ¶ï¼Œä½† region å¿…é¡»è¦†ç›–æ‰€æœ‰ç›¸å…³çš„ custom gate</strong></p>
<img src="./imgs/APIs_image_10.png" style="zoom:30%;" />
<p>æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨æœ€ä¸Šæ–¹çš„ç”µè·¯åŒ…å«ä¸¤ä¸ª custom gate (çº¢è‰²è¾¹æ¡†æ ‡è¯†)ï¼Œå¯ä»¥åˆ›å»ºå¦‚ä¸‹ä¸¤ç§region:</p>
<ol>
<li>
<p>å·¦è¾¹çš„æµ…ç»¿è‰²çŸ©å½¢ Region æ˜¯ Valid Region âœ… :</p>
<ul>
<li>åœ¨ Region ä¸­åšçš„èµ‹å€¼ assignments å·²ç»å®Œå…¨è¦†ç›–äº†å·¦è¾¹çš„ <code>Custom Gate</code> æ‰€éœ€è¦çš„</li>
<li>å‡è®¾åœ¨ selector col ä¸­ï¼Œä¸Šé¢çš„ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> , ä¸‹é¢çš„  <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> ï¼Œåˆ™è¯´æ˜ç”¨åˆ°äº†å·¦è¾¹çš„ 3 ä¸ª Cell</li>
</ul>
</li>
<li>
<p>è€Œå³è¾¹çš„æµ…ç»¿è‰²çŸ©å½¢ Region æ˜¯ invalid Region âŒ:</p>
<ul>
<li>å®ƒæ²¡æœ‰è¦†ç›–ä¸ <code>Custom Gate</code> ç›¸å…³çš„æ‰€æœ‰å•å…ƒæ ¼ã€‚ å¹¶ä¸”å®ƒå¹¶æ²¡æœ‰ assign <code>Custom Gate</code> æ‰€éœ€çš„æ‰€æœ‰å•å…ƒæ ¼</li>
<li>å¦‚æœæ‚¨æ‰“å¼€äº† selectorï¼ŒRegion åº”è¯¥è¦†ç›–ç”± <code>Custom Gate</code> æ§åˆ¶çš„æ‰€æœ‰å•å…ƒæ ¼ã€‚</li>
</ul>
</li>
</ol>
<!--
1. **A region doesnâ€™t need to have the same shape as custom gate,  but must cover all related custom gates.**
[pic]
 - it didn't cover all of the cells related to the `Custom Gate`.  and it doesn't assign all the cells you need for that `Custom Gate`
 - if you turn on the selector, you should cover all of cells controlled by this `Custom Gate`.
-->
<p>ç›®å‰åœ¨ halo2 ä¸­æœ‰ 2 ç§ Layouter å¯ä¾›é€‰æ‹©ï¼š</p>
<ol>
<li><strong>SimpleFloorPlanner</strong> (é‡ç‚¹å…³æ³¨ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„)</li>
<li>TwopassPlanner ?  V1/V1Plan ï¼Ÿ</li>
</ol>
<!--
2 layouters in halo2:
1. **SimpleFloorPlanner**
2. TwopassPlanner ?  V1/V1Plan ï¼Ÿ
-->
<h4 id="simplefloorplanner"><a class="header" href="#simplefloorplanner">SimpleFloorPlanner</a></h4>
<ul>
<li>è¿™æ˜¯ä¸€ä¸ªå•é€šé“å¸ƒå±€å™¨ (single-pass layouter)</li>
<li>å®ƒä¸ºè¯¥åŒºåŸŸä¸­ä½¿ç”¨çš„æ¯ä¸€åˆ—æ‰¾åˆ°ç¬¬ä¸€ä¸ªç©ºè¡Œå¹¶è·å–å…¶æ‰€éœ€çš„æœ€å¤šçš„å•å…ƒæ ¼ã€‚</li>
<li>å®ƒå°è¯•å°½å¯èƒ½å¤šåœ°åˆå¹¶ç›¸å…³çš„ regions ä»¥ä½¿ç”¨<strong>æ›´å°‘çš„è¡Œ</strong>ã€‚</li>
</ul>
<!--

- It is a single-pass layouter.Â 
- It finds the first empty row, for each column used in the region and takes a maximum.
- trying to pack all our region as much as possible to use the **fewer rows**  -->
<p>Region çš„å¸ƒå±€æ ¹æ®ç”µè·¯å¯ä»¥æœ‰å„ç§å½¢çŠ¶ï¼Œå¦‚:</p>
<p><img src="imgs/APIs_image_11.png" alt="" /></p>
<ul>
<li>Region <code>1</code> : use one cell for 3 advice column</li>
<li>Region <code>2</code> :  â€œL shapeâ€</li>
<li>Region <code>3</code> :  â€œL shapeâ€</li>
</ul>
<p>ä»¥ä¸‹å‡ ä¸ª Q&amp;A å¯ä»¥å¸®ä½ è¿›ä¸€æ­¥ç†è§£ regionï¼š</p>
<ul>
<li>Qï¼šregion 1 ä¸ºä»€ä¹ˆä¸éœ€è¦é€‰æ‹©å™¨ï¼Ÿ
<ul>
<li>Aï¼šä½ å¯ä»¥è®¤ä¸º region 1 æ˜¯ä½ æƒ³è¦åˆå§‹åŒ–çš„ä¸€äº› <strong>private input</strong>ï¼Œå®ƒä¸æ¶‰åŠä»»ä½• selectorï¼Œå³è¿™ä¸€è¡Œçš„é—¨çº¦æŸå¿…é¡»æˆç«‹</li>
</ul>
</li>
<li>Qï¼šå¦‚ä¸‹å›¾ï¼Œä¸ºä»€ä¹ˆ region 4 ä¸å‘ä¸Šå¡«å……åˆ°çº¢è‰²åŒºåŸŸï¼Ÿ
<ul>
<li>Aï¼šå¯¹äº Region 4 , å®ƒæœ¬å¯ä»¥å¡«åˆ°çº¢è‰²åŒºåŸŸé‡Œé¢, ä½†æ˜¯è¿™ä¸æ˜¯å’±ä»¬ SimpleFloorPlanner èƒ½åšçš„äº‹ ~ ï¼ˆ@Dr. Shen haichengï¼‰</li>
</ul>
</li>
</ul>
<img src="imgs/APIs_image_12.png" style="zoom:50%;" />
<!-- 
Q: how does region `1` not include a selector ?
A: you can think of region `1` is some **private input** you want to initialize, it doesn't involve any check (Selectors).
-->
<h3 id="diagrams"><a class="header" href="#diagrams">Diagrams</a></h3>
<p>åœ¨ Halo2 ä¸­å¯ä»¥é€šè¿‡è¾“å‡º diagrams ä¸Šè¿°ç”µè·¯å¸ƒå±€å›¾ï¼Œä»¥éå¸¸ç›´è§‚åœ°çœ‹åˆ°ç”µè·¯ä¸­æ‰€æœ‰ columns çš„çŠ¶æ€å’Œç”µè·¯æ•´ä½“å¸ƒå±€ï¼Œå¯ä»¥å¸®æˆ‘ä»¬ä¼˜åŒ–ç”µè·¯ã€æŸ¥æ‰¾ bug ç­‰ã€‚</p>
<p>halo2 ä¸€èˆ¬å¯ä»¥é€šè¿‡è°ƒç”¨å¦‚ä¸‹ API æ¥ç”Ÿæˆç”µè·¯å¸ƒå±€å›¾ï¼š</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(test)]
mod tests {
  use halo2_proofs::{dev::MockProver, pasta::Fp};
  use super::*;

  // ...
  #[cfg(feature = "dev-graph")]
  #[test]
  fn plot_chap_1_circuit(){
      // Instantiate the circuit with the private inputs.
      let circuit = MyCircuit::&lt;Fp&gt;::default();
      // Create the area you want to draw on.
      // Use SVGBackend if you want to render to .svg instead.
      use plotters::prelude::*;
      let root = BitMapBackend::new("./images/chap_1_simple.png", (1024, 768)).into_drawing_area();
      root.fill(&amp;WHITE).unwrap();
      let root = root
          .titled("Simple Circuit without chip", ("sans-serif", 60))
          .unwrap();
      halo2_proofs::dev::CircuitLayout::default()
          // You can optionally render only a section of the circuit.
          // .view_width(0..2)
          // .view_height(0..16)
          // You can hide labels, which can be useful with smaller areas.
          .show_labels(true)
          // Render the circuit onto your area!
          // The first argument is the size parameter for the circuit.
          .render(5, &amp;circuit, &amp;root)
          .unwrap();
  }
}
<span class="boring">}</span></code></pre></pre>
<p>æ‰€éœ€çš„ <code>Cargo.toml</code> é…ç½®</p>
<pre><code class="language-bash">[features]
dev-graph = ["halo2_proofs/dev-graph", "plotters", "plotters/bitmap_backend","plotters/bitmap_encoder"]

plotters = { version = "0.3.0", default-features = true, optional = true }
</code></pre>
<p>éœ€è¦å¼€å¯<code>dev-graph</code>æ‰èƒ½è°ƒç”¨ä¸Šè¿°å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">cargo test --dev-graph -- --nocapture chap_1::exercise_1::tests::plot_chap_1_circuit 
</code></pre>
<p><img src="imgs/APIs_image_2.png" alt="" /></p>
<p>å¦‚ä¸Šå›¾ï¼Œåœ¨ä¸€ä¸ªç”µè·¯å¸ƒå±€å›¾é‡Œï¼š</p>
<ul>
<li>adviceÂ columns(witness) æ˜¯ Â <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:pink;">p</span><span class="mord mathnormal" style="margin-right:0.03148em;color:pink;">ink</span></span></span></span>  (ç²‰è‰²çš„)</li>
<li>theÂ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;color:lime;">l</span><span class="mord mathnormal" style="color:lime;">i</span><span class="mord mathnormal" style="margin-right:0.03588em;color:lime;">g</span><span class="mord mathnormal" style="color:lime;">h</span><span class="mord mathnormal" style="color:lime;">t</span><span class="mspace" style="color:lime;"><span style="color:lime;">Â </span></span><span class="mord mathnormal" style="margin-right:0.03588em;color:lime;">g</span><span class="mord mathnormal" style="color:lime;">ree</span><span class="mord mathnormal" style="color:lime;">n</span></span></span></span>Â cells è¯´æ˜åœ¨ç”µè·¯å®šä¹‰æ—¶ç”¨åˆ°äº†ï¼Œæ˜¯ Region çš„ä¸€éƒ¨åˆ†</li>
<li>theÂ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:green;">d</span><span class="mord mathnormal" style="margin-right:0.02778em;color:green;">r</span><span class="mord mathnormal" style="margin-right:0.03148em;color:green;">ak</span><span class="mspace" style="color:green;"><span style="color:green;">Â </span></span><span class="mord mathnormal" style="margin-right:0.03588em;color:green;">g</span><span class="mord mathnormal" style="color:green;">ree</span><span class="mord mathnormal" style="color:green;">n</span></span></span></span>Â cells è¯´æ˜è¢«èµ‹å€¼äº†</li>
<li>the <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:purple;">p</span><span class="mord mathnormal" style="color:purple;">u</span><span class="mord mathnormal" style="margin-right:0.02778em;color:purple;">r</span><span class="mord mathnormal" style="margin-right:0.01968em;color:purple;">pl</span><span class="mord mathnormal" style="color:purple;">e</span></span></span></span> regions æ˜¯ <code>fixed</code> columns (preprocessed value)
<ul>
<li><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;color:violet;">l</span><span class="mord mathnormal" style="color:violet;">i</span><span class="mord mathnormal" style="margin-right:0.03588em;color:violet;">g</span><span class="mord mathnormal" style="color:violet;">h</span><span class="mord mathnormal" style="color:violet;">t</span><span class="mspace" style="color:violet;"><span style="color:violet;">Â </span></span><span class="mspace" style="color:violet;"><span style="color:violet;">Â </span></span><span class="mord mathnormal" style="color:violet;">p</span><span class="mord mathnormal" style="color:violet;">u</span><span class="mord mathnormal" style="margin-right:0.02778em;color:violet;">r</span><span class="mord mathnormal" style="margin-right:0.01968em;color:violet;">pl</span><span class="mord mathnormal" style="color:violet;">e</span></span></span></span> : selector.</li>
<li><span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:purple;">d</span><span class="mord mathnormal" style="color:purple;">a</span><span class="mord mathnormal" style="margin-right:0.02778em;color:purple;">r</span><span class="mord mathnormal" style="margin-right:0.03148em;color:purple;">k</span><span class="mspace" style="color:purple;"><span style="color:purple;">Â </span></span><span class="mspace" style="color:purple;"><span style="color:purple;">Â </span></span><span class="mord mathnormal" style="color:purple;">p</span><span class="mord mathnormal" style="color:purple;">u</span><span class="mord mathnormal" style="margin-right:0.02778em;color:purple;">r</span><span class="mord mathnormal" style="margin-right:0.01968em;color:purple;">pl</span><span class="mord mathnormal" style="color:purple;">e</span></span></span></span> : constantÂ valuesï¼Œæ¯”å¦‚ 5</li>
</ul>
</li>
</ul>
<p>å¯¹æ¯”ä¸Šå›¾çš„å•é€šé“å¸ƒå±€ vs åŒé€šé“å¸ƒå±€ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ä¸€äº›æœ‰æ„æ€çš„ç»“è®º:</p>
<ul>
<li>åŒé€šé“å¸ƒå±€å™¨åšäº†æ›´å¤š region å¸ƒå±€æ–¹é¢çš„ä¼˜åŒ–ï¼Œå°†ç”µè·¯è¡Œæ•°ç”± <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span> ä¼˜åŒ–åˆ°äº† <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">11</span></span></span></span></span></span></span></span></span></span></span></span> ï¼Œä¸è¿‡åˆ—æ•°ä¹Ÿæœ‰æ‰€å¢åŠ </li>
<li>ä¸€èˆ¬è€Œè¨€ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç”µè·¯å¸ƒå±€åšå¦‚ä¸‹æƒè¡¡ï¼š
<ul>
<li>å‡å°‘ç”µè·¯ä½¿ç”¨çš„ç©ºé—´ (space) ï¼Œå› ä¸ºè¡Œæ•°è¶Šå¤šï¼Œfft æ“ä½œè¶Šå¤šï¼ŒProve è¿‡ç¨‹å°±è¶Šæ…¢</li>
<li>å¢åŠ ç”µè·¯çš„åˆ—æ•°ï¼Œ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">ro</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span></span></span></span> éœ€è¦ commit æ¯ä¸ªåˆ—ï¼Œæ›´å¤šçš„åˆ—æ•°ï¼Œæ„å‘³ç€æ›´å¤šçš„ <code>commitments</code>ï¼Œä¹Ÿå°±æ„å‘³ç€æ›´å¤§çš„ <code>proof size</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸ºä»€ä¹ˆéœ€è¦ commit  column?  ç”µè·¯ç»“æ„åœ¨ preprocess é˜¶æ®µå·²ç»ç¡®å®šï¼ŒProver åˆ†åˆ«é’ˆå¯¹æ¯åˆ—è¿›è¡Œ commitmentï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢ Prover ä½œå¼Šï¼Œå¹¶å°†åç»­ commitment batch èµ·æ¥</p>
<p>ä¸ºä»€ä¹ˆ rows éœ€è¦ fft ? åœ¨ PLONK ä¸­ä½¿ç”¨äº†å¤šé¡¹å¼æ‰¿è¯ºï¼Œå¯ä»¥å°†è¯æ˜ç”Ÿæˆä¸­æ¶‰åŠåˆ°å¤§é‡çš„å¤šé¡¹å¼æ±‚å€¼ã€ä»¥åŠè®¡ç®—å•†å¤šé¡¹å¼ç­‰ï¼Œè¿™äº›éƒ½éœ€è¦ä½¿ç”¨ fft æ¥åŠ é€Ÿè¿ç®— (FFTæä¾›äº†ä¸€ä¸ªé«˜æ•ˆçš„æ–¹æ³•æ¥è½¬æ¢å¤šé¡¹å¼ç³»æ•°å½¢å¼å’Œå®ƒä»¬çš„ç‚¹å€¼è¡¨ç¤º)ã€‚ä»è€ŒéªŒè¯è¯¥è¡Œçš„å¤šé¡¹å¼çº¦æŸï¼ˆcustom gateï¼‰æ˜¯å¦å¾—åˆ°æ»¡è¶³</p>
</blockquote>
 <!--
 - theÂ adviceÂ columns(witness)Â areÂ stillÂ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:pink;">p</span><span class="mord mathnormal" style="margin-right:0.03148em;color:pink;">ink</span></span></span></span>
 - theÂ <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:green;">d</span><span class="mord mathnormal" style="margin-right:0.02778em;color:green;">r</span><span class="mord mathnormal" style="margin-right:0.03148em;color:green;">ak</span><span class="mspace" style="color:green;"><span style="color:green;">Â </span></span><span class="mord mathnormal" style="margin-right:0.03588em;color:green;">g</span><span class="mord mathnormal" style="color:green;">ree</span><span class="mord mathnormal" style="color:green;">n</span></span></span></span>Â boxesÂ justÂ meansÂ thatÂ theyÂ haveÂ beenÂ assigned
 - the <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="color:purple;">p</span><span class="mord mathnormal" style="color:purple;">u</span><span class="mord mathnormal" style="margin-right:0.02778em;color:purple;">r</span><span class="mord mathnormal" style="margin-right:0.01968em;color:purple;">pl</span><span class="mord mathnormal" style="color:purple;">e</span></span></span></span> regions are `fixed` columns (preprocessed value)
	 - <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;color:violet;">l</span><span class="mord mathnormal" style="color:violet;">i</span><span class="mord mathnormal" style="margin-right:0.03588em;color:violet;">g</span><span class="mord mathnormal" style="color:violet;">h</span><span class="mord mathnormal" style="color:violet;">t</span><span class="mspace" style="color:violet;"><span style="color:violet;">Â </span></span><span class="mspace" style="color:violet;"><span style="color:violet;">Â </span></span><span class="mord mathnormal" style="color:violet;">p</span><span class="mord mathnormal" style="color:violet;">u</span><span class="mord mathnormal" style="margin-right:0.02778em;color:violet;">r</span><span class="mord mathnormal" style="margin-right:0.01968em;color:violet;">pl</span><span class="mord mathnormal" style="color:violet;">e</span></span></span></span> : fixed columnÂ thatÂ is binary (0/1) weÂ callÂ these `selector` like in PLONK paper.
	 - <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;color:purple;">l</span><span class="mord mathnormal" style="color:purple;">i</span><span class="mord mathnormal" style="margin-right:0.03588em;color:purple;">g</span><span class="mord mathnormal" style="color:purple;">h</span><span class="mord mathnormal" style="color:purple;">t</span><span class="mspace" style="color:purple;"><span style="color:purple;">Â </span></span><span class="mspace" style="color:purple;"><span style="color:purple;">Â </span></span><span class="mord mathnormal" style="color:purple;">p</span><span class="mord mathnormal" style="color:purple;">u</span><span class="mord mathnormal" style="margin-right:0.02778em;color:purple;">r</span><span class="mord mathnormal" style="margin-right:0.01968em;color:purple;">pl</span><span class="mord mathnormal" style="color:purple;">e</span></span></span></span> : non-binaryÂ soÂ that youÂ canÂ witnessÂ constantÂ valuesÂ inÂ them. forÂ example like aÂ fixÂ columnÂ isÂ **five**Â andÂ youÂ wannaÂ yourÂ gateÂ doesÂ likeÂ **five** timesÂ something, andÂ weÂ useÂ theseÂ fixedÂ columns.  [^5]

Throughout the diagram, whatÂ areÂ weÂ tryingÂ to optimize?
 - we'reÂ tryingÂ toÂ reduce theÂ spaceÂ beingÂ usedÂ .
 - Casue we do a lot of FFTs on the rows.

What does columns do ? 
 - each column, the prover needs to make a `commitment` to the column.
 - so, more columns, more commitments ;  more commitments, larger proof.

-->
<h2 id="halo2-ç¼–ç¨‹æ¨¡å‹"><a class="header" href="#halo2-ç¼–ç¨‹æ¨¡å‹">Halo2 ç¼–ç¨‹æ¨¡å‹</a></h2>
<p>Halo2 çš„ç¼–ç¨‹æ¨¡å¼é‡‡ç”¨ â€œ é…ç½®-&gt; (è®¡ç®—+å­˜å‚¨ +ç”Ÿæˆè¯æ˜) -&gt; éªŒè¯ â€ä¸‰ä¸ªé˜¶æ®µã€‚</p>
<p><strong>é…ç½®(configure)</strong> é˜¶æ®µå®šä¹‰çº¦æŸå…³ç³»ã€‚å…·ä½“è€Œè¨€å°±æ˜¯åœ¨ <code>meta.create_gate</code> ä¸­ä» <code>table</code> ä¸­ <code>query cell</code>ï¼Œå¹¶å°† <code>query</code> çš„ç»“æœ (å³ expressionï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºä»æŸä¸ª cell ä¸­è·å–å€¼çš„æ–¹å¼ï¼Œåœ¨ configure é˜¶æ®µå¹¶ä¸çŸ¥é“å…·ä½“çš„å€¼ï¼Œåœ¨ç¬¬äºŒé˜¶æ®µé˜¶æ®µæ‰ä¼šè¢«èµ‹å€¼) å½¢æˆçº¦æŸã€‚</p>
<blockquote>
<p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œä¸å¦¨æŠŠ <code>query</code> è¿‡ç¨‹ç†è§£ä¸º PCB ç”µè·¯æ¿ä¸Šçš„æ¢é’ˆï¼Œåœ¨ PCB ç”µè·¯ä¸Šæ¢é’ˆå–åˆ°çš„å€¼è¾“å…¥åˆ°ç¤ºæ³¢å™¨æˆ–è€…é€»è¾‘åˆ†æä»ªï¼Œè€Œ halo2 ç”µè·¯ä¸­çš„å€¼ä¼šè¢«ç”¨äºç”Ÿæˆè¯æ˜å’ŒéªŒè¯çº¦æŸã€‚
éœ€è¦æŒ‡å‡ºï¼Œåœ¨ configure é˜¶æ®µï¼Œç”µè·¯å¹¶æ²¡æœ‰é€šç”µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶ç”µè·¯æ¿çš„é€»è¾‘çº¦æŸå·²ç»å½¢æˆï¼Œä½†æ˜¯å…·ä½“çš„å€¼(ä¿¡å·ã€ç”µæµ) å°šæœªè¢«åŠ è½½åˆ°ç”µè·¯ä¸­ã€‚</p>
</blockquote>
<p><strong>è®¡ç®—+å­˜å‚¨ï¼ˆsynthesizeï¼‰</strong></p>
<ul>
<li>åœ¨ç”µè·¯çš„ <code>synthesize</code> å‡½æ•°ä¸­ï¼ŒæŒ‰ç…§æ“ä½œæŒ‡ä»¤è®¡ç®—ï¼Œå¹¶å°†è®¡ç®—ç»“æœå¡«å…¥é€‚å½“çš„ Cellï¼Œç›¸å½“äºåœ¨ tableä¸Šç•™ä¸‹è®¡ç®—çš„ <code>trace</code></li>
</ul>
<p><strong>è¯æ˜ç”Ÿæˆ</strong> ï¼š</p>
<ul>
<li>åœ¨ Prove é˜¶æ®µï¼Œæ‰€æœ‰ç”¨åˆ°çš„ cell è¢«èµ‹å€¼ä¸”å½¢æˆè®¡ç®— trace  åï¼Œhalo2 ä¼šå…·ä½“è®¡ç®—æ¯ä¸€åˆ—çš„å¤šé¡¹å¼æ‰¿è¯ºã€‚</li>
</ul>
<p><strong>éªŒè¯</strong> ï¼š åœ¨ Verify é˜¶æ®µï¼Œæ£€æŸ¥æ‰€æœ‰çš„çº¦æŸæ˜¯å¦æ»¡è¶³ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ Halo2 çš„ä¸€äº›å…³é”®æ¦‚å¿µï¼Œåœ¨<a href="https://learn.z2o-k7e.world/halo2/chap-1/index.html">ä¸‹é¢ä¸€ç« </a>ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šä»¥ä¸€ä¸ªæœ€ç®€çš„ä¾‹å­å°è¯•ä½¿ç”¨ Halo2 library æä¾›çš„ API ç¼–å†™ç”µè·¯ï¼</p>
<hr />
<div class="footnote-definition" id="1"><sup class="footnote-definition-label">1</sup>
<p>borrowed from Star.Li https://mp.weixin.qq.com/s/VerLN8-tqetKs1Hv6m4KLg</p>
</div>
<div class="footnote-definition" id="2"><sup class="footnote-definition-label">3</sup>
<p>lots of images borrowed from great <a href="https://learn.0xparc.org/materials/halo2/learning-group-1/halo2-api">0xPARC halo2 lectures</a></p>
</div>
<div class="footnote-definition" id="3"><sup class="footnote-definition-label">6</sup>
<p>https://www.youtube.com/watch?v=W_zlH2mmtZA  0:41:20 - 0xPARC - # Intro</p>
</div>
<div class="footnote-definition" id="4"><sup class="footnote-definition-label">5</sup>
<p>https://www.youtube.com/watch?v=vGQAMQRlN3E  0:30:49 - 0xPARC - L2</p>
</div>
<div class="footnote-definition" id="5"><sup class="footnote-definition-label">7</sup>
<p>https://www.youtube.com/watch?v=W_zlH2mmtZA 0:44:41 - Intro</p>
</div>
<div class="footnote-definition" id="6"><sup class="footnote-definition-label">8</sup>
<p>https://www.youtube.com/watch?v=vGQAMQRlN3E  0:17:42 - 0xPARC - L2</p>
</div>
<div class="footnote-definition" id="7"><sup class="footnote-definition-label">9</sup>
<p>https://mp.weixin.qq.com/s/VerLN8-tqetKs1Hv6m4KLg</p>
</div>
<div class="footnote-definition" id="8"><sup class="footnote-definition-label">4</sup>
<p>https://consensys.io/diligence/blog/2023/07/endeavors-into-the-zero-knowledge-halo2-proving-system/</p>
</div>
<div class="footnote-definition" id="9"><sup class="footnote-definition-label">2</sup>
<p>https://zcash.github.io/halo2/concepts/proofs.html</p>
</div>

                        <hr>
                        <div class="giscus"></div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../halo2/halo2.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../halo2/chap-1/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../halo2/halo2.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../halo2/chap-1/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/mermaid.min.js"></script>
        <script src="../../theme/mermaid-init.js"></script>


    </div>

    <script type="text/javascript">
        var langs = [
            'cn',
            'en',
        ];

        (function initLangs() {
            var html = document.querySelector('html');
            var langToggleButton = document.getElementById('lang-toggle');
            var langPopup = document.getElementById('lang-list');

            function showLangs() {
                langPopup.style.display = 'block';
                langToggleButton.setAttribute('aria-expanded', true);
            }

            function hideLangs() {
                langPopup.style.display = 'none';
                langToggleButton.setAttribute('aria-expanded', false);
                langToggleButton.focus();
            }

            langToggleButton.addEventListener('click', function () {
                if (langPopup.style.display === 'block') {
                    hideLangs();
                } else {
                    showLangs();
                }
            });

            langPopup.addEventListener('focusout', function(e) {
                // e.relatedTarget is null in Safari and Firefox on macOS (see workaround below)
                if (!!e.relatedTarget && !langToggleButton.contains(e.relatedTarget) && !langPopup.contains(e.relatedTarget)) {
                    hideLangs();
                }
            });

            // Should not be needed, but it works around an issue on macOS & iOS: https://github.com/rust-lang-nursery/mdBook/issues/628
            document.addEventListener('click', function(e) {
                if (langPopup.style.display === 'block' && !langToggleButton.contains(e.target) && !langPopup.contains(e.target)) {
                    hideLangs();
                }
            });

            // For each language, update the link to point to the current page in that language
            let linkParts = window.location.pathname.split('/');
            let langIndex = linkParts.findIndex((s) => langs.includes(s));
            langs.forEach(function (lang) {
                var link = document.getElementById('lang-' + lang);
                if (!link) {
                    return;
                }

                let newLinkParts = linkParts.slice();

                // If it is Chinese, remove the current language from the path
                if (lang === "cn") {
                    if (langIndex !== -1) {
                        newLinkParts.splice(langIndex, 1);
                    }
                }
                
                // Otherwise, add the new language to the path
                else {
                    if (langIndex === -1) {
                        // Modify this line to insert the language right after the domain
                        newLinkParts.splice(1, 0, lang);
                    } else {
                        newLinkParts[langIndex] = lang;
                    }
                }

                link.href = newLinkParts.join('/');
            });
        })();

        </script>
        <script src="https://giscus.app/client.js"
                data-repo="zkp-co-learning/zkp-co-learning.github.io"
                data-repo-id="R_kgDOKNpxMQ"
                data-category="Announcements"
                data-category-id="DIC_kwDOKNpxMc4CZ2LA"
                data-mapping="pathname"
                data-strict="0"
                data-reactions-enabled="1"
                data-emit-metadata="0"
                data-input-position="bottom"
                data-theme="light"
                data-lang="zh-CN"
                crossorigin="anonymous"
                async>
        </script>
    </body>
</html>
